(function(){var t,e={}.hasOwnProperty,n=function(t,n){function r(){this.constructor=n}for(var o in t)e.call(t,o)&&(n[o]=t[o])
return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},r=this
this.OpenPay=function(){function t(){}return t.version=1,t.sandboxMode=!1,t.hostname="https://api.openpay.mx/v1/",t.sandboxHostname="https://sandbox-api.openpay.mx/v1/",t.setSandboxMode=function(e){t.sandboxMode=e?!0:!1},t.getSandboxMode=function(){return t.sandboxMode},t.setId=function(e){t.id=e},t.setApiKey=function(e){t.key=e},t.log=function(t){"object"==typeof t&&"toString"in t&&(t=""+t),"undefined"!=typeof console&&"log"in console&&console.log(t)},t.validate=function(t,e){if(!t)throw e+" required"
if("object"!=typeof t)throw e+" invalid"},t.formatData=function(t){return t},t.send=function(e,n,r,o){function i(t,e){var n=typeof t[e]
return"function"==n||!("object"!=n||!t[e])||"unknown"==n}function s(t){var e=t+":",n=btoa(e)
return n}function a(){return"undefined"!=typeof XDomainRequest?new XDomainRequest:i(window,"XMLHttpRequest")?new XMLHttpRequest:void 0}function c(t,e,n){clearTimeout(u)
var r=null
t=t||"Unknown error",e=e||0,n=n||"{}"
try{r=JSON.parse(n)}catch(i){t="Response error"}o({message:t,status:e,data:r,toString:function(){return this.message+" [status "+this.status+"]"}})}function h(){if(void 0!==l.readyState&&4==l.readyState||"undefined"!=typeof XDomainRequest)if(clearTimeout(u),l.status<200||l.status>=300)c("Request error",l.status,l.responseText)
else try{r({data:JSON.parse(l.responseText),status:200})}catch(t){c("Response error (Unknown final status)",l.status,"{}")}}var l=null,u=null,d="",f="",p={},_=0,m=""
if(void 0===t.id||!/^[a-z0-9]+$/i.test(t.id))return c("Empty or invalid OpenPay ID"),void 0
if(void 0===t.key||!/^pk_[a-z0-9]+$/i.test(t.key))return c("Empty or invalid OpenPay API Key"),void 0
if("function"!=typeof r&&(r=t.log),"function"!=typeof o&&(o=t.log),"undefined"==typeof JSON)return c("Browser error (JSON library not found)"),void 0
if(!(l=a()))return c("Browser error (CORS not supported)"),void 0
m=s(t.key),d=(t.sandboxMode?t.sandboxHostname:t.hostname)+t.id+"/"+e,f=JSON.stringify(n),p={Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+m},_=4e4,"withCredentials"in l&&(l.withCredentials=!0),l.open("POST",d,!0)
for(var y in p)p.hasOwnProperty(y)&&p[y]&&"setRequestHeader"in l&&l.setRequestHeader(y,p[y])
"onreadystatechange"in l?l.onreadystatechange=h:"onload"in l&&"onerror"in l&&(l.onload=h,l.onerror=c),u=setTimeout(function(){"onload"in l?l.onload=Function.prototype:l.onreadystatechange=Function.prototype,l.abort(),l=null,c("Timeout after "+_+" milliseconds")},_),l.send(f)},t}.call(this),t=this.OpenPay,this.OpenPay.card=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return n(e,r),r.tokenName="card",r.whitelistedAttrs=["card_number","holder_name","cvv2","expiration_month","expiration_year","address"],r.create=function(e,n,o,i){var s="cards"
return void 0!==i&&""!==i&&(s="customers/"+i+"/cards"),t.validate(e,"tarjeta"),t.formatData(e,r.whitelistedAttrs),t.send(s,e,n,o)},r.validateCardNumber=function(t){return t=(t+"").replace(/\s+|-/g,""),/^\d+$/.test(t)&&t.length>=10&&t.length<=16&&r.luhnCheck(t)&&r.validateCardNumberLength(t)&&r.validateAcceptCardNumber(t)},r.validateCVC=function(e){return e=t.utils.trim(e),/^\d+$/.test(e)&&e.length>=3&&e.length<=4},r.validateExpiry=function(e,n){var r,o
return e=t.utils.trim(e),n=t.utils.trim(n),/^\d+$/.test(e)?/^\d+$/.test(n)?parseInt(e,10)<=12?(o=new Date(n,e),r=new Date,o.setMonth(o.getMonth()-1),o.setMonth(o.getMonth()+1,1),o>r):!1:!1:!1},r.validateCardNumberLength=function(t){var e=null
if(e=r.cardAbstract(t))for(var n=e.length.length;n--;)if(e.length[n]==t.length)return!0
return!1},r.validateAcceptCardNumber=function(t){var e=null
return(e=r.cardAbstract(t))?e.accept:!1},r.luhnCheck=function(t){var e,n,o,i,s,a
for(o=!0,i=0,n=(t+"").split("").reverse(),s=0,a=r.length;a>s;s++)e=n[s],e=parseInt(e,10),(o=!o)&&(e*=2),e>9&&(e-=9),i+=e
return i%10===0},r.cardType=function(t){var e=null
return(e=r.cardAbstract(t))?e.name:""},r.cardTypes=function(){return{visa_electron:{name:"Visa Electron",regx:/^(4026|417500|4508|4844|491(3|7))/,length:[16],accept:!0},visa:{name:"Visa",regx:/^4/,length:[16],accept:!0},mastercard:{name:"Mastercard",regx:/^5[1-5]/,length:[16],accept:!0},amex:{name:"American Express",regx:/^3[47]/,length:[15],accept:!1},diners_cb:{name:"Diners Club Carte Blanche",regx:/^30[0-5]/,length:[14],accept:!1},diners_int:{name:"Diners Club International",regx:/^36/,length:[14],accept:!1},jcb:{name:"JCB",regx:/^35(2[89]|[3-8][0-9])/,length:[16],accept:!1},laser:{name:"Laser",regx:/^(6304|670[69]|6771)/,length:[16,17,18,19],accept:!1},maestro:{name:"Maestro",regx:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19],accept:!1},discover:{name:"Discover",regx:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16],accept:!1}}},r.cardAbstract=function(t){var e={}
e=r.cardTypes()
for(var n in e)if(_cardObj=e[n],t.match(_cardObj.regx))return _cardObj
return!1},r}.call(this,this.OpenPay),this.OpenPay.utils=function(t){function e(){}return n(t,e),e.trim=function(t){return(t+"").replace(/^\s+|\s+$/g,"")},e.underscore=function(t){return(t+"").replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()}).replace(/-/g,"_")},e.underscoreKeys=function(t){var e,n
n=[]
for(var r in t)e=t[r],delete t[r],n.push(t[this.underscore(r)]=e)
return n},e.isElement=function(t){return"object"!=typeof t?!1:"undefined"!=typeof jQuery&&null!==jQuery&&t instanceof jQuery?!0:1===t.nodeType},e}.call(this,this.OpenPay),this.OpenPay.deviceData=function(t){function e(){}function r(){return sjcl.codec.base64.fromBits(sjcl.random.randomWords(6,0))}function o(t,e){var n=document.createElement("input")
return n.type="hidden",n.value=e,n.name=t,n}function i(t,e){setTimeout(function(){var n=document.createElement("iframe")
n.width=1,n.height=1,n.frameBorder=0,n.scrolling="no",n.src=t,document.body.appendChild(n)
var r=document.createElement("img")
r.src=e,r.width=1,r.height=1,n.appendChild(r)},50)}return e.collectorImg="logo.gif",e.collectorIframe="logo.htm",e.collectorId=12345,e.sandboxCollectorId=6789,n(t,e),e.getDeviceDataId=function(){return void 0===e.deviceDataId&&(e.deviceDataId=r()),e.deviceDataId},e.setupForm=function(n,r){document.getElementById(n).appendChild(o(r,e.getDeviceDataId()))
var s="?m="+(t.sandboxMode?e.sandboxCollectorId:e.collectorId)+"&s="+e.getDeviceDataId(),a=t.sandboxMode?t.sandboxHostname:t.hostname,c=a+e.collectorImg+s,h=a+e.collectorIframe+s
i(h,c)},e}.call(this,this.OpenPay),"undefined"!=typeof module&&null!==module&&(module.exports=this.OpenPay),"function"==typeof define&&define("openpay",[],function(){return r.OpenPay})}).call(this),function(){"use strict"
var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}}
"undefined"!=typeof module&&module.exports&&(module.exports=t),t.cipher.aes=function(e){this._tables[0][0][0]||this._precompute()
var n,r,o,i,s,a=this._tables[0][4],c=this._tables[1],h=e.length,l=1
if(4!==h&&6!==h&&8!==h)throw new t.exception.invalid("invalid aes key size")
for(this._key=[i=e.slice(0),s=[]],n=h;4*h+28>n;n++)o=i[n-1],(n%h===0||8===h&&n%h===4)&&(o=a[o>>>24]<<24^a[o>>16&255]<<16^a[o>>8&255]<<8^a[255&o],n%h===0&&(o=o<<8^o>>>24^l<<24,l=l<<1^283*(l>>7))),i[n]=i[n-h]^o
for(r=0;n;r++,n--)o=i[3&r?n:n-4],s[r]=4>=n||4>r?o:c[0][a[o>>>24]]^c[1][a[o>>16&255]]^c[2][a[o>>8&255]]^c[3][a[255&o]]},t.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,n,r,o,i,s,a,c,h=this._tables[0],l=this._tables[1],u=h[4],d=l[4],f=[],p=[]
for(t=0;256>t;t++)p[(f[t]=t<<1^283*(t>>7))^t]=t
for(e=n=0;!u[e];e^=r||1,n=p[n]||1)for(s=n^n<<1^n<<2^n<<3^n<<4,s=s>>8^255&s^99,u[e]=s,d[s]=e,i=f[o=f[r=f[e]]],c=16843009*i^65537*o^257*r^16843008*e,a=257*f[s]^16843008*s,t=0;4>t;t++)h[t][e]=a=a<<24^a>>>8,l[t][s]=c=c<<24^c>>>8
for(t=0;5>t;t++)h[t]=h[t].slice(0),l[t]=l[t].slice(0)},_crypt:function(e,n){if(4!==e.length)throw new t.exception.invalid("invalid aes block size")
var r,o,i,s,a=this._key[n],c=e[0]^a[0],h=e[n?3:1]^a[1],l=e[2]^a[2],u=e[n?1:3]^a[3],d=a.length/4-2,f=4,p=[0,0,0,0],_=this._tables[n],m=_[0],y=_[1],g=_[2],v=_[3],b=_[4]
for(s=0;d>s;s++)r=m[c>>>24]^y[h>>16&255]^g[l>>8&255]^v[255&u]^a[f],o=m[h>>>24]^y[l>>16&255]^g[u>>8&255]^v[255&c]^a[f+1],i=m[l>>>24]^y[u>>16&255]^g[c>>8&255]^v[255&h]^a[f+2],u=m[u>>>24]^y[c>>16&255]^g[h>>8&255]^v[255&l]^a[f+3],f+=4,c=r,h=o,l=i
for(s=0;4>s;s++)p[n?3&-s:s]=b[c>>>24]<<24^b[h>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^a[f++],r=c,c=h,h=l,l=u,u=r
return p}},t.bitArray={bitSlice:function(e,n,r){return e=t.bitArray._shiftRight(e.slice(n/32),32-(31&n)).slice(1),void 0===r?e:t.bitArray.clamp(e,r-n)},extract:function(t,e,n){var r,o=Math.floor(-e-n&31)
return r=-32&(e+n-1^e)?t[e/32|0]<<32-o^t[e/32+1|0]>>>o:t[e/32|0]>>>o,r&(1<<n)-1},concat:function(e,n){if(0===e.length||0===n.length)return e.concat(n)
var r=e[e.length-1],o=t.bitArray.getPartial(r)
return 32===o?e.concat(n):t.bitArray._shiftRight(n,o,0|r,e.slice(0,e.length-1))},bitLength:function(e){var n,r=e.length
return 0===r?0:(n=e[r-1],32*(r-1)+t.bitArray.getPartial(n))},clamp:function(e,n){if(32*e.length<n)return e
e=e.slice(0,Math.ceil(n/32))
var r=e.length
return n=31&n,r>0&&n&&(e[r-1]=t.bitArray.partial(n,e[r-1]&2147483648>>n-1,1)),e},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(e,n){if(t.bitArray.bitLength(e)!==t.bitArray.bitLength(n))return!1
var r,o=0
for(r=0;r<e.length;r++)o|=e[r]^n[r]
return 0===o},_shiftRight:function(e,n,r,o){var i,s,a=0
for(void 0===o&&(o=[]);n>=32;n-=32)o.push(r),r=0
if(0===n)return o.concat(e)
for(i=0;i<e.length;i++)o.push(r|e[i]>>>n),r=e[i]<<32-n
return a=e.length?e[e.length-1]:0,s=t.bitArray.getPartial(a),o.push(t.bitArray.partial(n+s&31,n+s>32?r:o.pop(),1)),o},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},t.codec.utf8String={fromBits:function(e){var n,r,o="",i=t.bitArray.bitLength(e)
for(n=0;i/8>n;n++)0===(3&n)&&(r=e[n/4]),o+=String.fromCharCode(r>>>24),r<<=8
return decodeURIComponent(escape(o))},toBits:function(e){e=unescape(encodeURIComponent(e))
var n,r=[],o=0
for(n=0;n<e.length;n++)o=o<<8|e.charCodeAt(n),3===(3&n)&&(r.push(o),o=0)
return 3&n&&r.push(t.bitArray.partial(8*(3&n),o)),r}},t.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,n,r){var o,i="",s=0,a=t.codec.base64._chars,c=0,h=t.bitArray.bitLength(e)
for(r&&(a=a.substr(0,62)+"-_"),o=0;6*i.length<h;)i+=a.charAt((c^e[o]>>>s)>>>26),6>s?(c=e[o]<<6-s,s+=26,o++):(c<<=6,s-=6)
for(;3&i.length&&!n;)i+="="
return i},toBits:function(e,n){e=e.replace(/\s|=/g,"")
var r,o,i=[],s=0,a=t.codec.base64._chars,c=0
for(n&&(a=a.substr(0,62)+"-_"),r=0;r<e.length;r++){if(o=a.indexOf(e.charAt(r)),0>o)throw new t.exception.invalid("this isn't base64!")
s>26?(s-=26,i.push(c^o>>>s),c=o<<32-s):(s+=6,c^=o<<32-s)}return 56&s&&i.push(t.bitArray.partial(56&s,c,1)),i}},t.codec.base64url={fromBits:function(e){return t.codec.base64.fromBits(e,1,1)},toBits:function(e){return t.codec.base64.toBits(e,1)}},t.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},t.hash.sha256.hash=function(e){return(new t.hash.sha256).update(e).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"==typeof e&&(e=t.codec.utf8String.toBits(e))
var n,r=this._buffer=t.bitArray.concat(this._buffer,e),o=this._length,i=this._length=o+t.bitArray.bitLength(e)
for(n=512+o&-512;i>=n;n+=512)this._block(r.splice(0,16))
return this},finalize:function(){var e,n=this._buffer,r=this._h
for(n=t.bitArray.concat(n,[t.bitArray.partial(1,1)]),e=n.length+2;15&e;e++)n.push(0)
for(n.push(Math.floor(this._length/4294967296)),n.push(0|this._length);n.length;)this._block(n.splice(0,16))
return this.reset(),r},_init:[],_key:[],_precompute:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,n=0,r=2
t:for(;64>n;r++){for(e=2;r>=e*e;e++)if(r%e===0)continue t
8>n&&(this._init[n]=t(Math.pow(r,.5))),this._key[n]=t(Math.pow(r,1/3)),n++}},_block:function(t){var e,n,r,o,i=t.slice(0),s=this._h,a=this._key,c=s[0],h=s[1],l=s[2],u=s[3],d=s[4],f=s[5],p=s[6],_=s[7]
for(e=0;64>e;e++)16>e?n=i[e]:(r=i[e+1&15],o=i[e+14&15],n=i[15&e]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+i[15&e]+i[e+9&15]|0),n=n+_+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(p^d&(f^p))+a[e],_=p,p=f,f=d,d=u+n|0,u=l,l=h,h=c,c=n+(h&l^u&(h^l))+(h>>>2^h>>>13^h>>>22^h<<30^h<<19^h<<10)|0
s[0]=s[0]+c|0,s[1]=s[1]+h|0,s[2]=s[2]+l|0,s[3]=s[3]+u|0,s[4]=s[4]+d|0,s[5]=s[5]+f|0,s[6]=s[6]+p|0,s[7]=s[7]+_|0}},t.prng=function(e){this._pools=[new t.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=e,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},t.prng.prototype={randomWords:function(e,n){var r,o,i=[],s=this.isReady(n)
if(s===this._NOT_READY)throw new t.exception.notReady("generator isn't seeded")
for(s&this._REQUIRES_RESEED&&this._reseedFromPools(!(s&this._READY)),r=0;e>r;r+=4)(r+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),o=this._gen4words(),i.push(o[0],o[1],o[2],o[3])
return this._gate(),i.slice(0,e)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw"Setting paranoia=0 will ruin your security; use it only for testing"
this._defaultParanoia=t},addEntropy:function(e,n,r){r=r||"user"
var o,i,s,a,c=(new Date).valueOf(),h=this._robins[r],l=this.isReady(),u=0
switch(o=this._collectorIds[r],void 0===o&&(o=this._collectorIds[r]=this._collectorIdNext++),void 0===h&&(h=this._robins[r]=0),this._robins[r]=(this._robins[r]+1)%this._pools.length,typeof e){case"number":void 0===n&&(n=1),this._pools[h].update([o,this._eventId++,1,n,c,1,0|e])
break
case"object":if(a=Object.prototype.toString.call(e),"[object Uint32Array]"===a){for(s=[],i=0;i<e.length;i++)s.push(e[i])
e=s}else for("[object Array]"!==a&&(u=1),i=0;i<e.length&&!u;i++)"number"!=typeof e[i]&&(u=1)
if(!u){if(void 0===n)for(n=0,i=0;i<e.length;i++)for(s=e[i];s>0;)n++,s>>>=1
this._pools[h].update([o,this._eventId++,2,n,c,e.length].concat(e))}break
case"string":void 0===n&&(n=e.length),this._pools[h].update([o,this._eventId++,3,n,c,e.length]),this._pools[h].update(e)
break
default:u=1}if(u)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string")
this._poolEntropy[h]+=n,this._poolStrength+=n,l===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia]
return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t?t:this._defaultParanoia]
return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("mousemove",this._eventListener.mouseCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1),window.addEventListener("devicemotion",this._eventListener.accelerometerCollector,!1)
else{if(!document.attachEvent)throw new t.exception.bug("can't attach event")
document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("onmousemove",this._eventListener.mouseCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("mousemove",this._eventListener.mouseCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1),window.removeEventListener("devicemotion",this._eventListener.accelerometerCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("onmousemove",this._eventListener.mouseCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var n,r,o=this._callbacks[t],i=[]
for(r in o)o.hasOwnProperty(r)&&o[r]===e&&i.push(r)
for(n=0;n<i.length;n++)r=i[n],delete o[r]},_bind:function(t){var e=this
return function(){t.apply(e,arguments)}},_gen4words:function(){for(var t=0;4>t&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new t.cipher.aes(this._key)},_reseed:function(e){this._key=t.hash.sha256.hash(this._key.concat(e)),this._cipher=new t.cipher.aes(this._key)
for(var n=0;4>n&&(this._counter[n]=this._counter[n]+1|0,!this._counter[n]);n++);},_reseedFromPools:function(e){var n,r=[],o=0
for(this._nextReseed=r[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,n=0;16>n;n++)r.push(4294967296*Math.random()|0)
for(n=0;n<this._pools.length&&(r=r.concat(this._pools[n].finalize()),o+=this._poolEntropy[n],this._poolEntropy[n]=0,e||!(this._reseedCount&1<<n));n++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new t.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=o,o>this._strength&&(this._strength=o),this._reseedCount++,this._reseed(r)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(e){var n=e.x||e.clientX||e.offsetX||0,r=e.y||e.clientY||e.offsetY||0
t.random.addEntropy([n,r],2,"mouse"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(e){window&&window.performance&&"function"==typeof window.performance.now?t.random.addEntropy(window.performance.now(),e,"loadtime"):t.random.addEntropy((new Date).valueOf(),e,"loadtime")},_accelerometerCollector:function(e){var n=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z
if(window.orientation){var r=window.orientation
"number"==typeof r&&t.random.addEntropy(r,1,"accelerometer")}n&&t.random.addEntropy(n,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(e,n){var r,o=t.random._callbacks[e],i=[]
for(r in o)o.hasOwnProperty(r)&&i.push(o[r])
for(r=0;r<i.length;r++)i[r](n)}},t.random=new t.prng(6),function(){try{var e,n,r
if("undefined"!=typeof module&&module.exports&&(n=require("crypto"))&&n.randomBytes)e=n.randomBytes(128),e=new Uint32Array(new Uint8Array(e).buffer),t.random.addEntropy(e,1024,"crypto.randomBytes")
else if(window&&Uint32Array){if(r=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(r)
else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return
window.msCrypto.getRandomValues(r)}t.random.addEntropy(r,1024,"crypto.getRandomValues")}}catch(o){console.log("There was an error collecting entropy from the browser:"),console.log(o)}}()}()
